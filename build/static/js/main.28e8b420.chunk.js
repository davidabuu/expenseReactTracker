(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{41:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(33),s=n.n(c),o=n(15),l=n(3),i=(n(41),n(9)),u=n.n(i),j=n(13),d=n(8),b=n(11),p=n.n(b),x=Object(r.createContext)(),O=n(19),h=n(2),m="ADD_EXPENSE",f="DELETE_EXPENSE",v="UPDATE_EXPESNE",y="SET_CURRENT",g="CLEAR_CURRENT",E="SET_ALERT",C="CLEAR_ALERT",w="REGISTER_FAIL",A="REGISTER_SUCCESS",N="AUTH_ERROR",S="LOGOUT",k="LOGIN_SUCCESS",R="LOGIN_FAIL",T="CLEAR_ERRORS",P="LOAD_USER",F="EXPESNE_ERROR",_="GET_EXPENSE",L=function(e,t){switch(t.type){case _:return Object(h.a)(Object(h.a)({},e),{},{expense:t.payload,loading:!1});case m:return Object(h.a)(Object(h.a)({},e),{},{expense:[].concat(Object(O.a)(e.expense),[t.payload]),loading:!1});case f:return Object(h.a)(Object(h.a)({},e),{},{expense:e.expense.filter((function(e){return e._id!==t.payload})),loading:!1});case v:return Object(h.a)(Object(h.a)({},e),{},{expense:e.expense.map((function(e){return e.id===t.payload.id?t.payload:e})),loading:!1});case y:return Object(h.a)(Object(h.a)({},e),{},{current:t.payload});case g:return Object(h.a)(Object(h.a)({},e),{},{current:null});case F:return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});default:return e}},D=n(0),I=function(e){var t=Object(r.useReducer)(L,{expense:[],current:null,error:null}),n=Object(d.a)(t,2),a=n[0],c=n[1],s=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/user-expenses");case 3:e.sent,c({type:_,payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:F,payload:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.post("/api/user-expenses",t,n);case 4:r=e.sent,c({type:m,payload:t}),console.log(r.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:F,payload:e.t0.response.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(x.Provider,{value:{expense:a.expense,current:a.current,error:a.error,getExpense:s,addExpense:o,updateExpense:function(e){c({type:v,payload:e})},deleteExpense:function(e){c({type:f,payload:e})},setCurrent:function(e){c({type:y,payload:e})},clearCurrent:function(){c({type:g})}},children:e.children})},U=Object(r.createContext)(),X=function(e){var t=e.title,n=Object(r.useContext)(U),a=n.isAuthenticated,c=n.logout,s=n.user,l=Object(D.jsxs)(r.Fragment,{children:[Object(D.jsxs)("li",{children:["Hello ",s&&s.name]}),Object(D.jsx)("li",{children:Object(D.jsx)("a",{href:"",onClick:function(){c()},children:"Logout"})})]}),i=Object(D.jsxs)(r.Fragment,{children:[Object(D.jsx)("li",{children:Object(D.jsx)(o.b,{to:"/register",style:{textDecoration:"none"},children:"Register"})}),Object(D.jsx)("li",{children:Object(D.jsx)(o.b,{to:"/login",style:{textDecoration:"none"},children:"Login"})})]});return Object(D.jsx)(r.Fragment,{children:Object(D.jsxs)("div",{className:"nav-container",children:[Object(D.jsx)("h1",{children:t}),Object(D.jsx)("ul",{children:a?l:i})]})})};X.defaultProps={title:"EXPENSE TRACKER"};var G=X,Y=n(12),M=Object(r.createContext)(),H=function(e){var t=Object(r.useContext)(M),n=Object(r.useContext)(U),a=n.register,c=n.error,s=n.clearErrors,o=n.isAuthenticated,l=t.setAlert;Object(r.useEffect)((function(){o&&e.history.push("/"),c&&(l(c),s())}),[c,o,e.history]);var i=Object(r.useState)({name:"",email:"",password:"",password2:""}),u=Object(d.a)(i,2),j=u[0],b=u[1],p=j.name,x=j.email,O=j.password,m=j.password2,f=function(e){b(Object(h.a)(Object(h.a)({},j),{},Object(Y.a)({},e.target.name,e.target.value)))};return Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===p||""===x||""===O||""===m?l("Please Enter all Fields","danger"):O!==m?l("Password Do Not Match","danger"):a({name:p,email:x,password:O})},children:[Object(D.jsx)("h2",{children:"Account Register"}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Name"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:f,type:"text",placeholder:"Enter Your name",name:"name",value:p})]}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Email"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:f,type:"email",placeholder:"Enter your email",name:"email",value:x})]}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Password"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:f,type:"password",placeholder:"Enter Your Password",name:"password",value:O})]}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Confirm Password"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:f,type:"password",placeholder:"Enter Your Password",name:"password2",value:m})]}),Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"submit",value:"Register",className:"transaction-btn"})})]})},$=function(e){var t=Object(r.useContext)(M),n=Object(r.useContext)(U),a=n.login,c=n.error,s=n.isAuthenticated,o=n.clearErrors,l=t.setAlert,i=Object(r.useState)({email:"",password:""}),u=Object(d.a)(i,2),j=u[0],b=u[1];Object(r.useEffect)((function(){s&&e.history.push("/"),c&&(l(c),o())}),[c,s,e.history]);var p=j.email,x=j.password,O=function(e){b(Object(h.a)(Object(h.a)({},j),{},Object(Y.a)({},e.target.name,e.target.value)))};return Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===p||""===x?l("Please Enter All Fields","danger"):a({email:p,password:x})},children:[Object(D.jsx)("h2",{children:"Login"}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Email"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:O,type:"email",placeholder:"Enter your email",name:"email",value:p})]}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Password"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:O,type:"password",placeholder:"Enter Your Password",name:"password",value:x})]}),Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"submit",value:"Login",className:"transaction-btn"})})]})},z=n(68),B=function(e,t){switch(t.type){case E:return[].concat(Object(O.a)(e),[t.payload]);case C:return e.filter((function(e){return e.id!==t.payload}));default:return e}},J=function(e){var t=Object(r.useReducer)(B,[]),n=Object(d.a)(t,2),a=n[0],c=n[1];return Object(D.jsx)(M.Provider,{value:{alerts:a,setAlert:function(e,t){var n=Object(z.a)();c({type:E,payload:{msg:e,type:t,id:n}}),setTimeout((function(){c({type:C,payload:n})}),3e3)}},children:e.children})},K=function(){var e=Object(r.useContext)(M).alerts;return e.length>0&&e.map((function(e){return Object(D.jsx)("div",{className:"alert alert-".concat(e.type),children:e.msg},e.id)}))},q=function(e,t){switch(t.type){case P:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case A:case k:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0},t.payload),{},{loading:!1});case w:case N:case R:case S:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!1,loading:!1,token:null,user:null,error:t.payload});case T:return Object(h.a)(Object(h.a)({},e),{},{error:null});default:return e}},Q=function(e){e?p.a.defaults.headers.common["x-auth-token"]=e:delete p.a.defaults.headers.common["x-auth-token"]},V=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,user:null,loading:!0,error:null},n=Object(r.useReducer)(q,t),a=Object(d.a)(n,2),c=a[0],s=a[1],o=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&Q(localStorage.token),e.prev=1,e.next=4,p.a.get("/api/auth");case 4:t=e.sent,s({type:P,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:N});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.post("/api/users",t,n);case 4:r=e.sent,s({type:A,payload:r.data}),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s({type:w,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,p.a.post("/api/auth",t,n);case 4:r=e.sent,s({type:k,payload:r.data}),console.log(r.data),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s({type:R,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)(U.Provider,{value:{token:c.token,isAuthenticated:c.isAuthenticated,loading:c.loading,error:c.error,user:c.user,register:l,clearErrors:function(){s({type:T})},loadUser:o,login:i,logout:function(){s({type:S})}},children:e.children})},W=function(e){var t=e.expenses,n=t.text,a=t.amount,c=t.id,s=Object(r.useContext)(x),o=s.deleteExpense,l=s.clearCurrent,i=s.setCurrent;return Object(D.jsx)("div",{children:Object(D.jsxs)("div",{style:{fontSize:"20px"},className:"each-expense",children:[n,Object(D.jsxs)("span",{style:{float:"right"},children:["Price:","$".concat(a)]}),Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"button",value:"Edit",className:"edit-btn",onClick:function(){return i(t)}})}),Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"button",value:"Delete",className:"delete-btn",onClick:function(){o(c),l()}})})]})})},Z=function(){var e=Object(r.useContext)(x),t=e.expense,n=e.getExpense;return Object(r.useEffect)((function(){n(t)}),[]),Object(D.jsx)(r.Fragment,{children:t.map((function(e){return Object(D.jsx)(W,{expenses:e},e._id)}))})},ee=function(){var e=Object(r.useContext)(x).expense.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),n=e.filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(D.jsxs)("div",{className:"expense-container",children:[Object(D.jsxs)("div",{className:"income",children:[Object(D.jsx)("h1",{children:"INCOME"}),Object(D.jsxs)("h1",{className:"money-income",children:["$",t]})]}),Object(D.jsxs)("div",{className:"expense",children:[Object(D.jsx)("h1",{children:"EXPENSE"}),Object(D.jsxs)("h1",{className:"money-expense",children:["$",Math.abs(n)]})]})]})},te={backgroundColor:"red",color:"#fff",width:"220px",padding:"5px",textAlign:"center"},ne=function(e){var t=e.showAlert;return Object(D.jsx)("div",{children:null!==t&&Object(D.jsx)("div",{style:te,children:"Please Enter all Fields"})})},re=function(){var e=Object(r.useContext)(x),t=e.addExpense,n=e.current,a=e.clearCurrent,c=e.updateExpense;Object(r.useEffect)((function(){i(null!==n?n:{text:"",amount:"",showAlert:null})}),[e,n]);var s=Object(r.useState)({text:"",amount:"",showAlert:null}),o=Object(d.a)(s,2),l=o[0],i=o[1],u=l.text,j=l.amount,b=l.showAlert,p=j;l.amount=p;var O=function(e){i(Object(h.a)(Object(h.a)({},l),{},Object(Y.a)({},e.target.name,[e.target.value])))};return Object(D.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===u||""===j)i(Object(h.a)(Object(h.a)({},l),{},{showAlert:!0}));else if(null===n){t({text:u,amount:+p})}else c({text:l.text,amount:+l.amount})},children:[Object(D.jsx)("h2",{style:{marginTop:"15px"},children:n?"Edit Transaction":"Add a new Transaction"}),Object(D.jsx)(ne,{showAlert:b}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Text"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{onChange:O,type:"text",placeholder:"Enter a Text",name:"text",value:u})]}),Object(D.jsxs)("div",{className:"form-control",children:[Object(D.jsx)("label",{htmlFor:"",children:"Amount"}),Object(D.jsx)("p",{children:"(negative - expense, positve - income)"}),Object(D.jsx)("input",{type:"text",placeholder:"Enter an Amount",name:"amount",value:j,onChange:O})]}),Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"submit",value:n?"Update Transaction":"Add a new Transaction",className:"transaction-btn"})}),n&&Object(D.jsx)("div",{children:Object(D.jsx)("input",{type:"submit",value:"CLEAR",className:"transaction-btn",onClick:function(){a()}})})]})},ae={marginTop:"40px"},ce=function(){var e=Object(r.useContext)(x).expense.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(D.jsxs)("div",{style:ae,children:[Object(D.jsx)("h1",{children:"Your Expenses"}),Object(D.jsxs)("h2",{style:{marginTop:"20px",fontSize:"30px"},children:["Total Balance: ",Object(D.jsx)("span",{children:e})]})]})},se=function(){var e=Object(r.useContext)(U);return Object(r.useEffect)((function(){e.loadUser(),console.log(e.loadUser())}),[]),Object(D.jsxs)("div",{className:"grid",children:[Object(D.jsx)(ce,{}),Object(D.jsx)(ee,{}),Object(D.jsxs)("div",{className:"expense-items",children:[Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{style:{display:"inline-block"},children:[Object(D.jsx)("h2",{style:{marginTop:"40px"},children:"HISTORY"}),Object(D.jsx)(Z,{})]})]}),Object(D.jsx)(re,{})]})},oe=n(35),le=function(e){var t=e.component,n=Object(oe.a)(e,["component"]),a=Object(r.useContext)(U),c=a.isAuthenticated,s=a.loading;return Object(D.jsx)(l.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return c||s?Object(D.jsx)(t,Object(h.a)({},e)):Object(D.jsx)(l.a,{to:"/login"})}}))};localStorage.token&&Q(localStorage.token);var ie=function(){return Object(D.jsx)(V,{children:Object(D.jsx)(I,{children:Object(D.jsx)(J,{children:Object(D.jsx)(o.a,{children:Object(D.jsx)("div",{className:"grid",children:Object(D.jsxs)("div",{children:[Object(D.jsx)(G,{}),Object(D.jsx)(K,{}),Object(D.jsxs)(l.d,{children:[Object(D.jsx)(le,{exact:!0,path:"/",component:se}),Object(D.jsx)(l.b,{exact:!0,path:"/register",component:H}),Object(D.jsx)(l.b,{exact:!0,path:"/login",component:$})]})]})})})})})})};s.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(ie,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.28e8b420.chunk.js.map